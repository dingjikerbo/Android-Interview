先说requestLayout实现，

```
@Override
public void requestLayout() {
    checkThread();
    scheduleTraversals();
}
```

这先检查线程对不对，再scheduleTraversals，主要是post了一个runnable给Chreographer，这个runnable里调用了一个doTraversal。注意这里post了一个sync barrier，意思是如果UI线程后面有消息过来，在没有移除这个barrier之前，那些消息就算到时了也先别执行。在哪里移除的呢？在doTraversal里，先移除barrier，再performTraversal。

```
void scheduleTraversals() {
    mTraversalBarrier = mHandler.getLooper().getQueue().postSyncBarrier();
    mChoreographer.postCallback(
                Choreographer.CALLBACK_TRAVERSAL, mTraversalRunnable, null);
}
```


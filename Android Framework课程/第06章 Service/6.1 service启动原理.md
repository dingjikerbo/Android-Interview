# startService
# bindService autoCreate

```
@Override
public ComponentName startService(Intent service) {
    return startServiceCommon(service, mUser);
}

private ComponentName startServiceCommon(Intent service, UserHandle user) {
    ActivityManagerNative.getDefault().startService(
        mMainThread.getApplicationThread(), service,);
    return cn;
}
```

看AMS里的实现，

```
@Override
public ComponentName startService(IApplicationThread caller, ) {
    ComponentName res = mServices.startServiceLocked(caller, service,
            resolvedType, callingPid, callingUid, callingPackage, userId);
    return res;
}
```

```
ComponentName startServiceLocked(IApplicationThread caller, Intent service, ) {
    ......
    return startServiceInnerLocked(smap, service, r, );
}
```

```
ComponentName startServiceInnerLocked(ServiceMap smap, Intent service, ) {
    ......
    bringUpServiceLocked(r, service.getFlags(), callerFg, false);
    return r.name;
}
```

```
private final String bringUpServiceLocked(ServiceRecord r, ) {
    final String procName = r.processName;
    ProcessRecord app;

    app = mAm.getProcessRecordLocked(procName, r.appInfo.uid, false);

    if (app != null && app.thread != null) {
        realStartServiceLocked(r, app, execInFg);
        return null;
    }

    if (app == null) {
        app=mAm.startProcessLocked(procName, r.appInfo, true, intentFlags,
                "service", r.name, false, isolated, false);
    }

    if (!mPendingServices.contains(r)) {
        mPendingServices.add(r);
    }

    return null;
}
```
# 谈谈对context的理解


### Context的初始化
Service, Activity, Application初始化流程？
类继承关系？他们创建的Context有什么不同？
怎么只有Activity，Service持有Context，那Receiver和Provider没有呢？他们里面的是什么context

getApplicationContext/getContext/getBaseContext有什么区别？还有Activity的this?


### Context作用域
非Activity的context显示窗口出错？
如何获取context
getApplciation和getApplicationContext区别？
为什么跟界面相关的要用Activity的context？Toast使用ApplicationContext也可以？
Context引起的内存小泄露？
getSystemService拿到的对象是不一样的？

```
@Override
public void startActivity(Intent intent, Bundle options) {
    warnIfCallingFromSystemProcess();
    if ((intent.getFlags()&Intent.FLAG_ACTIVITY_NEW_TASK) == 0) {
        throw new AndroidRuntimeException(
                "Calling startActivity() from outside of an Activity "
                + " context requires the FLAG_ACTIVITY_NEW_TASK flag."
                + " Is this really what you want?");
    }
    mMainThread.getInstrumentation().execStartActivity(
            getOuterContext(), mMainThread.getApplicationThread(), null,
            (Activity) null, intent, -1, options);
}
```

为什么要判断这个，因为启动Activity的时候，如果判断没有这个标志，就会自动把这个新的Activity加到现有的task里。非Activity的context，没有现存的任务栈供新建的activity使用。

### 参考
 - [Context 都没弄明白，还怎么做 Android 开发？](https://zhuanlan.zhihu.com/p/24847247)
 - [如何理解Context?](https://zhuanlan.zhihu.com/p/27163977)
 - [四大组件以及Application和Context的全面理解](https://zhuanlan.zhihu.com/p/41010018)